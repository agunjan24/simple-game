# Plan: Cross-Platform Movie Guessing Game (Browser + Android + iOS)

## Goal
Rebuild the frontend as a standalone web app that runs in browsers AND gets packaged as native Android/iOS apps via Capacitor. Keep the existing NiceGUI version for quick local use.

## Recommended Framework: Vue 3
- Simpler than React, less boilerplate
- Excellent mobile performance
- First-class Capacitor integration (Ionic officially supports Vue)
- Single-file components (`.vue`) keep template + logic + styles together — matches the current single-file structure of `app_nicegui.py`
- Good ecosystem for a small team/solo developer

## Architecture

```
bollywood-game/
├── app.py                    # Streamlit (unchanged)
├── app_nicegui.py            # NiceGUI (unchanged, kept for local use)
├── data.csv                  # Shared data
├── data_hollywood.csv        # Shared data
├── images/                   # Shared images
├── images_hollywood/         # Shared images
│
└── mobile-app/               # NEW — Vue 3 + Capacitor project
    ├── package.json
    ├── vite.config.js
    ├── capacitor.config.ts
    ├── index.html
    ├── public/
    │   ├── images/            # Copied from ../images/
    │   └── images_hollywood/  # Copied from ../images_hollywood/
    ├── src/
    │   ├── main.js
    │   ├── App.vue
    │   ├── router.js
    │   ├── data/
    │   │   ├── bollywood.json    # Converted from data.csv
    │   │   └── hollywood.json    # Converted from data_hollywood.csv
    │   ├── stores/
    │   │   └── gameStore.js      # Pinia store (replaces GameState class)
    │   ├── composables/
    │   │   ├── useTimer.js       # Timer logic
    │   │   ├── useAudio.js       # Web Audio sound effects
    │   │   └── useConfetti.js    # Victory confetti
    │   ├── components/
    │   │   ├── WelcomeScreen.vue
    │   │   ├── GameScreen.vue
    │   │   ├── GameOverScreen.vue
    │   │   ├── MovieImage.vue       # Image + blur + countdown overlay
    │   │   ├── TimerCircle.vue
    │   │   ├── ProgressDots.vue
    │   │   ├── TeamScoreboard.vue
    │   │   ├── ThemeToggle.vue
    │   │   └── ControlButtons.vue   # Hint / Reveal / Next
    │   ├── themes/
    │   │   └── themes.js         # Theme configs (colors, team names, phrases)
    │   └── styles/
    │       └── main.css          # Global styles, film-strip, animations
    ├── android/                  # Generated by Capacitor
    └── ios/                      # Generated by Capacitor
```

## Implementation Phases

### Phase 1: Project Setup
- Initialize Vue 3 project with Vite inside `mobile-app/`
- Install dependencies: `vue-router`, `pinia` (state management), `@capacitor/core`, `@capacitor/cli`
- Convert CSV files to JSON (one-time script or manual)
- Copy images into `public/`
- Set up theme config in `themes.js` (direct port from THEMES dict)

### Phase 2: Core Game Logic
- Create `gameStore.js` (Pinia) — direct port of `GameState` class:
  - Theme switching, movie selection, hint logic, blur calculation
  - Team mode scoring (100/75/50 points, -25 hint penalty)
  - Track shown movies, game over detection
- Create `useTimer.js` composable — countdown logic
- Create `useAudio.js` — port existing Web Audio JS (tick, victory sounds)

### Phase 3: UI Components
- **WelcomeScreen.vue** — theme toggle, solo/team switch, progressive reveal toggle, team name config with dice, timer config, start button
- **GameScreen.vue** — main game layout with header, image, buttons, hint/answer areas
- **MovieImage.vue** — image display with CSS blur progressive reveal and countdown overlay
- **TimerCircle.vue** — circular countdown timer
- **ProgressDots.vue** — movie progress indicator
- **ControlButtons.vue** — Hint, Reveal, Next buttons
- **TeamScoreboard.vue** — team scores, current turn indicator
- **GameOverScreen.vue** — winner announcement, confetti, play again

### Phase 4: Styling
- Port all CSS from `generate_theme_css()` to `main.css`
- Dynamic theme colors via CSS custom properties (variables) instead of Python f-strings
- Responsive design: same breakpoints and mobile-first approach
- Film strip borders, animations (spotlight pulse, reel spin, twinkle)
- Touch optimizations for iOS (same fixes already in NiceGUI version)

### Phase 5: Capacitor Integration
- `npx cap init` — configure app name, bundle ID
- `npx cap add android` + `npx cap add ios`
- Configure splash screen and app icon
- Build: `npm run build && npx cap sync`
- Test on Android emulator and iOS simulator
- Handle status bar, safe areas, and notch

### Phase 6: App Store Preparation
- Create app icons (multiple sizes for both stores)
- Create screenshots for store listings
- Write store descriptions
- Android: Generate signed APK/AAB, create Google Play developer account ($25 one-time)
- iOS: Apple Developer Program enrollment ($99/year), provisioning profiles, TestFlight

## Feature Parity Checklist
All features from NiceGUI version must be present:
- [ ] Solo mode with 60s timer
- [ ] Team mode with configurable timer (15-120s)
- [ ] Bollywood + Hollywood themes with full color palettes
- [ ] Theme toggle on welcome screen
- [ ] Progressive reveal (blur → clear)
- [ ] Hint system (custom hints + auto-generated first-letter hints)
- [ ] Team scoring (100/75/50 points, -25 hint penalty)
- [ ] Randomizable team names with dice button
- [ ] Progress dots
- [ ] Countdown overlay for last 10 seconds
- [ ] Sound effects (tick, victory)
- [ ] Confetti on game over
- [ ] Responsive design (mobile + desktop + TV)
- [ ] Film strip visual theme

## What Changes vs Current NiceGUI Version
| Aspect | NiceGUI | Vue + Capacitor |
|--------|---------|-----------------|
| Language | Python | JavaScript |
| Rendering | Server-side | Client-side |
| Images | Served by Python | Bundled in app |
| Data | CSV loaded by Pandas | JSON imported directly |
| State | Python GameState class | Pinia store |
| Styling | Python f-string CSS | CSS custom properties |
| Offline | No | Yes |
| App stores | No | Yes (via Capacitor) |

## Verification
1. `npm run dev` — test in browser at localhost
2. Browser DevTools mobile mode — test responsive layout
3. `npx cap run android` — test on Android emulator
4. `npx cap run ios` — test on iOS simulator (requires Mac)
5. Test all game modes: solo, team, both themes
6. Test progressive reveal, hints, scoring
7. Test on actual phone via network or USB debugging
8. Verify offline play works with bundled images

## Prerequisites
- Node.js 18+
- Android Studio (for Android builds)
- Xcode on Mac (for iOS builds — cannot build iOS on Windows)
- Google Play Developer account (for Android store)
- Apple Developer Program membership (for iOS store)

## Important Note: iOS Builds
iOS apps **cannot be built on Windows**. You will need access to a Mac (physical or cloud-based like MacStadium/GitHub Actions) for iOS builds and App Store submission.
